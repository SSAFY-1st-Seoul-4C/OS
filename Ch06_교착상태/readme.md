## 교착 상태(Deadlock)

### 교착 상태란?

- 자원이 한정적인 상황에서 두 개 이상의 프로세스가 각자 먼저 확보한 자원을 가진 채 상대방의 자원을 필요로 할 경우, 외부로부터의 조치가 없는 한 이들은 아무 일도 못하고 계속 기다려야 할 것이다. 이러한 상황을 교착 상태라 한다.




### 교착 상태가 발생되는 근본 원인은 무엇일까?

- 시스템이 가지고 있는 한정적인 자원보다 사용하고자 하는 프로세스들의 요청이 더 많기 때문이다.



### 자원이란?

* 먼저 선점 가능성에 따라 두 가지로 나뉘는데, CPU나 메모리와 같은 자원처럼 한 프로세스에 의해 사용 도중 선점(Preemption)되어 다른 프로세스에게 할당(Allocation)해 주었다가 이 후 다시 원래의 프로세스에게 돌려주어도 되는 자원들을 선점 가능(Preemptible, 운영체제에 의해 사용 도중 뺏길 수 있는) 자원이라고 하고, 이러한 선점이 불가능한 자원 즉, 선점이 될 경우 자원을 뺏긴 프로세스는 정상적인 진행을 포기해야 하는 불이익을 받게 되는 경우의 자원을 선점 불가능(Nonpreemptible) 자원이라고 한다. 물론 시스템은 이러한 상황을 원치 않으므로 선점 불가능 자원은 사용 도중 뺏을 수 없도록 하고 있다. 예를 들어, 다수의 사용자에게 공유되어 사용 중인 프린터에서 한 사용자가 프린트를 하는 도중에 다른 사용자에게 선점되도록 한다면 프린터 용지에는 여러 사용자의 데이터가 섞여 버릴 수 있고 이것은 누구도 원치 않는 결과가 될 것이다. 선점이 가능토록 자원을 활용하는 이유는 다중 프로그래밍의 성공을 위해서이며, 선점 불가능 자원은 시스템의 정상적인 진행을 위해 정해진다는 점을 이해하자.
* 다음으로 자원이 사용되어지는 방식에 따라 나눌 수 있는데, 한 프로세스에게 할당된 자원을 동시에 다른 프로세스가 할당받아 같이 사용할 수 있는지의 여부에 따라 공유 가능(Sharable) 자원과 배타적 사용(Exclusive Use) 자원으로 분류된다. 배타적 사용 자원으로 CPU, 메모리, 테이프, 버퍼(Buffer), 키보드와 모니터 등이 있으며, 공유 가능 자원으로는 공유 가능한 프로그램(시스템 프로그램이나 유틸리티 프로그램 등)과 공유 데이터 등이 있다.
* 또 다른 관점에서 자원의 속성에 따른 분류를 해보면, 먼저 할당된 자원이 사용 후 반납(Release)되었을 때 자원 자체는 계속 존재하여 또 다른 프로세스에게 할당이 가능하다면 그 자원은 순차적 재사용 가능(Serially Reusable) 자원이라 하는데 이러한 자원은 시스템에서 프로세스들이 아무리 사용해도 없어지지 않고 영구히 존재하는 자원으로 CPU, 메모리, 하드디스크, 버퍼, 프로그램 등이 있다. 반대로 사용 후 사라지는 자원은 소모성(Consumable) 자원에 해당하고 일시적으로 생성되었다가 사용된 후 없어지는 시그널이나 메시지 등이 여기에 해당된다.

